#!/usr/local/bin/node

var net = require("net");

var mc = require("./minecraft-client.js");

var client = new MinecraftClient();
// client.connect("37.59.31.213", 25570, "ak239");

function hexToBuf(hex)
{
    var bytes = [];
    for (var i = 0; i < hex.length / 2; ++i)
        bytes.push(eval("0x" + hex[i * 2] + hex[i * 2 + 1]));
    return new Buffer(bytes);
}

var server = net.createServer(function(socket) {
    // socket.setEncoding("binary");
    socket.setKeepAlive(true);
    socket.on("data", data => {
        // if (data.toString("hex") === "050100")
        //     socket.write(new Buffer([0x05,]));
        console.log(data);
        if (data.toString("hex").startsWith("09010000") )
            socket.write(data);
        else if (data.toString("hex").startsWith("0f000409") && data.toString("hex").endsWith("0100")){
        socket.write(hexToBuf(
            "ec7400e9747b226465736372697074696f6e223a22c2a7612020202020202020202020202020cb99ce87d9a0d9a0d9a0e280a2e2978f20efbda1e29795c2a763e280bfc2a736e29795efbda120e2978fe280a2d9a0d9a0d9a0ce87cb995c6ec2a762c2a76dc2a76c2d2dc2a738c2a76dc2a76c5b2dc2a77220c2a7614d696e656372616674c2a7364f6e6c792e527520c2a772c2a738c2a76dc2a76c2d5dc2a762c2a76dc2a76c2d2dc2a772222c22706c6179657273223a7b226d6178223a3130302c226f6e6c696e65223a37327d2c2276657273696f6e223a7b226e616d65223a226361756c64726f6e2c637261667462756b6b69742c6d6370632c666d6c2c666f72676520312e372e32222c2270726f746f636f6c223a347d2c2266617669636f6e223a22646174613a696d6167652f706e673b6261736536342c6956424f5277304b47676f414141414e535568455567414141454141414142414341594141414371615848654141416f32456c4551565234327331374233686331626e7455634559434330335c6e424a49626b747751456767334a435368685749773241614d7355307a324942743348435656617a6565786e3158717a656578317052706f5a39564876585a5974796233525355676b7a5870725c6e6e786b374a676d45652b393333337636767658744d30646a7a617a31722f58766634396b53666f66666d6d726f36536d756b5370545663674e61745470555a6c6c4b5174397a65724c2f45305c6e71793932733141584f566b7163773962354d57395a7059662f345a556e504b652f4f2b716933796c4b72566171716c4b4d362f4f736635685a6672755a3151465236773674636b37423775725c6e622b31754c3562614e446d53767372657645767461394772435a4c4765776f6b58644565716238785850702f386c5752615533595341557068365479444775704b737461717332334e31506d5c6e32707172696a7773744e55526c765646727561444635616b63514f6b327454743076482b4b716b73383332704b484f4c314e735964324e7a706339396a6557653678737266527862616f4b7a5c6e5775764375357156495a656171674d585732704430616d4e52326444314579484f7353747179483870313271494b6d2f4b564653352b30323636727a744268706a544472556e744c6c302f705c6e704b486d305038397371796570436e786c42714b335355316f5370304d6c4d584f7073316c506d59313564365736704c7643326136794c4d6d7052686b713436525034334c585648706548685c6e65616d375463586e2b4e2b704c6e5a37556c586f734c4d752f30683458623674537056764f3673717346316f4b446f4362596b6a6447564f614b37776746346469613747464f6a7267705a615c6e4b313257327170633056376a6a67366c353265646456345a58537176502b5a625332597a467943316c7579562b6871384c5961614665626a375a4879367734334b3652786666522f6b32694a5c6e4f386c36534a6f79663135376b71794c54465a5636477a4f31614b75774e36794a6d752f2b53646644456f41704b4c3472564a4834573670764e42447171324e6c70724c4847366f7a7472335c6e5332572b347973365a597944726a6f7353315071316456513476356851366d6e5156506d4451467468543852414732354c2b4674304a56374c6a52576543773056376f7664545445474c71305c6e38596232576e2b304b33304a6e36563270646469653430483271706430616e7958534b303353725054665044575465656d797951526c7643705048326149764a7a6c694c3259463043524f785c6e306f512b696f354c2b792f614f73644e556857356d3963564f6c6e57356c7062464d5a754d644f57374a4e305a566253672f792b706a7841306c5a47534e71715350503659766337744f57425c6e6a7a65552b57395446726947567563364b4b7479624764716368332b6f716c5551467356436e57" +
            "52433951465236417574454e3934524530464e6b764e705a374c62545678792b32316971575c6e5771703944533156506d6970396b45723056626a4c5a5075714174455633306f656a5352364e56466f302b674b645977304a61794f4e69575974417276644252363434657464636b486544595c6e312b4431672f474f4f476d674f566f61622f45786e2b6d4a737a67356b6d743261724a4d636e354b6b6b364f46663758684e445552456e4b6a5031536463493269665a6572697030755a634f5c6e654a6b4f4f464a58344a444274614d75332f3679717444526f43357942643243686a4a66676c577443674f626e304658466271674b6e4a6471437477584b4c394458534351566668692b61615c6e454c545878364756476465563076716c3972532b4331706f39565a43564c6d3932673336476a6553394552586e52643647774977304269423063354d6a4f68544d4e4957767a6a63467263305c6e31424b466f5a5a776a4c5347587835726a343662366b6e356e574b484a4e576c72704a4f5475535a6e5a3473733567667954617244483941356a58574569424e6438642b5058466c6b6338745c6e396357756a796c7a7262665735646d454d4b2f5671674c3761654a4c41674b3864773373424a6149425835767362374961556c44717774724e796d6a304b4b4b52314e4e474a7172673077495c6e594c583930466f54434831394642474c706972476f4951696c44764b3550556937375565364b777a6b753953656367436a4c53547544345a51303268474e5146594b6952393571446c305a625c6e517862485768555961314e676f6c337831366d4f694e726a66636e72356b654c6c3532623055677a66596e53534a4f487855523773506c4d563454556d6653344e4e726f4c68336e2f582f345c6e796f6d3376712b3279506554686e4a2f314257364770523544716a4f73554631396d48555a423832314f52594c79687a62525a71383279586176507344435175414a56416756687461584e6e5c6e4e4659466f376b756874566d6c6373386f43313149687a6c696a664b7a55355532687364617470636c34414f545179463845495437376455756248707366704b647772676757344b4d4e41595c6e69754857614a6e346f4d365835503078334551426d767778326b793042426a4757774d574a397143444a507451546a5746596d35776451684f75445178566e564861656e7971573573587a705c6e374653352b646e4a556f754c7838724e4c70306f5a682b626c53374f6c483546413475634f4f737564596b2f6446574b763267716768667279774b57564d5665426d572b4d367179625647525c6e655169565759643554574679374b444d6f79734b484d43496f4a376b74575665614348356c726f6f6145704d78456d367363775a54655575737432624b326e35536947434f357461454557495c6e516d396a4450504f565364794834342b62526a366461456b723842516377514747305051722f56447638596241787050444f6d384b594166786c6f4457666c67544c6148454d4555494842785c6e73733176615859674257656d4b7a48644758462b734d46524d644c6f3861745430795853736145386161356c6e396e357352534c43354f5a5a6d64487771545a415366702f5068525363714b5c6e4f69776c42652b4b7959765a4432574f3351494846784a7a68466a564a47646333566c745a2b62654851334d766f625a4631316456786d45786d6f466d705868614656466734324f39672b6d5c6e492b784933466d7575707a31537046314e3549335672704c4857416b7277306e77544461335a2f774956452f4447685a386359676a4c53455956776668346d7546426c6a48584559627145345c6e4f69454948614a7878794178334f694438665a51484f395077716d7867695657664846754b42334865784e776f692f70532b34617057656e71316464506a4e70495861786b364e6c30756e425c6e4349767a45" +
            "366e6d353063544a436e476237735537624e31613262455868544537466d716f6630356b5946325235304a44615865714d6c6c2f764e73354d3565583268506b673751464974715c6e4f304e58376f376d4b6e2b30315557675135744551554b3445316a4c496f694b47346d3751362f6b6e71393051336544416f4e74716178304a4b73656a4a35364c37437a6b356750426641785c6e5764365065512f4565467334707273545344416473384d466d4230707850484248457a334a504e2b49755a48636e46367641686e7038747864716f55703066536348597379334275496d65525c6e774c6d4a62426e6e4a334b364c30356d37376b38573358375752492f4e35706b4a6753524d6d4c73704c524936776653772f63735a4371326f79682b50334e766132702b64764b714c6665445c6e6d694a555a52346b6355655a66454f78497756776c416361725a787a56727a534532323177656a534a614a4e4659723667734e7978322b70644a597233313474334f43452f70596b444f76545c6e354a7a33795a58334a58452f5674377662316c76446841356c38464768325064635467786b49483573524c4d445764686e6c552b4f5a53472b5945457a5058483474525143733554684850545c6e4a62794f78337976416966377777796e42794d587a7778484738364f78424a784f444d556466705576384c76776d54472f6474454132696f54705736323558585a3055666e497a33664257355c6e6b5875574375494f6f433758566e6143694943323341654e624735565756626758452f53547379366f397a6f2f705a3159586c6e32653774334e7437744446736547455579346177706842325c6e664e34526447736a4d4e4b566a6147324a505379387233316e685442432f30434769395733357532396d576a59395a622f4d464768346d32414d7830783242754e42386e78307445737950785c6e5a4d7a32786542346477684f39495269726a6363703465546348476d4168654f46644d4a795559682b694d7731784e454243366537464d736e52314e58507a7752444664456c3842584a536b5c6e314942337a624d6a396b6f5a3458757a597a316552627a58786f576336494d6f547467504e523351554f4a4b6b74356f726f3245757351446c526e3735426a6f53466f6d542b4a4e317a53355c6e712f73364c64396448797a62765573644b44653677645a456a48526b6d5062325a4e6b422f62706735742b504d66424748353351722f586e74696436514169337554424d64455269756973615c6e4a2f70546349726b54303255344f52774771756667746e655343494d633333686d4f2b4c594d556a63486f6f44756647303346684d6763587076496f526845756e616a4270646c71664871755c6e455174665450376c77376c43544c63663854696d6435436b6c4d42746c6b654464306770516473504a66707468734a7535574a79344876496a6a3641334f6a64304a52366f4c4753773477795c6e6a5074384f4c6647673353426c6279394e5a4f77774665626e4d69366d4f4d39354732745730574c36384977324253426f6459346a485a6c595a53447a576862444d626159346b6f456f32675c6e7a534d783252464473724730657a786d65684c427652327a4130646c6e427772414c63346e4a6d6b434d4f302f3243695848564266463457494a5332447761726a445044736267346e592b505c6e54366e7735342f487366446e6b79512b6763552f546550544d7857476d513448544f75644e307931485a476b354d427446716d4b58564a4b38493748452f33664d595135766f426f397732475c6e764c69444b456c68343875795a35506a4e7363707272302b67534f754932717939724968577245484346754c7163364a41726a494f52666b4f7a6e55384f5247386c364570317a686f655a495c6e6a48616b5972776e47325036654759376a4662336b3763317361397a596a505a5052426958352f5342324f364934545735" +
            "2f374f446a3950306e4b6a6f77426e52744e7037576a4d396754545c6e32694773664467746e59724c3833583437454958305948504c33584a35502f367039503438744e7866506e4a4544342f583275593766566b395a322b484775322f666c6f6f37556b4a515a735c6e4e55734e3353756c6865322f4f6348766e5a4d524c7138673375644e5130376b4c69697a5856475a636768316d545a6f71516e69384a4b45466a7042572b3570524a6b62592b444b474c68635c6e6a554772664a4a7a6b2b66324c704c6e3743356e6661517446684f394f5a6a6f54734e6f4b30665a71343075304c69767477584a65377367506b5869677679785467566d75685155494936575c6e543561372f4e6e4a496a6e724a77646a634859384135666e716b6d3444582f366541682f2b644d702f505850352f476e54386278326155652f4f574c552f6a7973796c386362454a6e352b725c6e596c39514c4532314f3246555a7a56576d374c697573626356795170337664644b53316b6d316c71795074536f762f57696969336a556a7933377a49586f4473734b326f534471496d714f485c6e554a2f72414831446e48786537394c4773706e46635a694a343334754549732b377574396a547a414e4561686e397462502b663467555a616e786871556d43384b77315466626b593734686e5c6e702f6568414c3579315156784d64424d36593259376d44483777776c636537744a482b384b78676e69506d2b4b4c6e44583535767745656e4e666a735969652b2b4769517849666c395973505c6e65346c2b2f506d7a4f587a352b556e382b64506a76442b416a302f6d34364f35644877386e306b682f526448645963783275535133316d2b53657175664e746346694442377a334c6c4f43645c6e556c4c672b7934527268735237767a795171545443306a77326f43736b43326f53624e47625a6f566d6b713965484c7a67373757682f446c374f374c4b767568572b33504a736268526850495c6e4a68624d595357457842553873455378326c456b6e5353546e2b346e2b724978325a334b37456654415548476a742f69792b6f4847717665455577455971597a694e30396e486e6e396e61735c6e464a666d362f484a68543538646e6b516e333834774c56507272494d586e2f2b496539663773576e46397135386e73583966686f506863666e6b696e41446e346144594c6b323148466962355c6e7330394e6c546a4f6a2b644c73384e706c764973484f507a6a6b5679384334704f576a48366944486a5169776552376844717351352f454b456a7a58495675784763703061326a79755030565c6e4f4d7637756a693847413877562f4a2b786537657871464753324a74624844744d5a6a737a634c30514236486c364e73634778752f576b344d5a694634774f5a764a636b48327147644634595c6e3072707838416e43374f42526e4439656a512f50744f4c6a437a33343646776e50726b34676b387644564b454c714a62786d655868416a392b505269467a342b57383834354f48385644492b5c6e50642b436a302f5834764b4a44426b667a6d62672f47513870726f55686850447157797751532f4f39437034614171336b423051356258464c436c677535546f393937335139336576687a715c6e39416f555235347a52446d2f694354766a59683365774635595674516e324e5041647852525463494566513172695476666733784b304d4e4a376b6d5a707343544861543945412b696162495c6e453931305a77777a486b36626839506d334d624543447561777735666a745054536c7959623853485a37767830666b655844716a4e7a342b5279745467492f50643141516b722f59527746365c6e3864475a526e7838727057784548742f4d73354e4a624a48484d556e3539754a4e686b666e3958696b334d4e754843697a4843734c355a78632f6c30544c6676376c487442394a347334325a5c6e464f667a726854703862615a63454c" +
            "543942636369376672776c31665135444e7973567768395749393178504637794d464f39314b4935354834314662716a4a6445426a715a39386b4f6c755c6e434f462b37302f79766e4c56427a6d72432f445969736e4f524a4c504d3436746e564679316964612f536d41776a69376a78666a334b774746302f726366475548683965474d65466b2b32385c6e7038583575555a436838766e4276487870516d4b5146484f39564363647361684668654f35354e774d693666564f4c6963624866702b483061417a4f544b525371485a386546714644302f565c6e736c38774f7564305043656b4c6f3031326648316e58706e42704d73706a723970596c575a356d334545434b4439686a6d52783653496f5033424d59377659474167342f7378426d767772525c6e7269395267466551355055794d674a665130486b4f795476693761714550536f6d50636d34783476546e41447569435346364f734f4c4746797061665973556e395171756b62513842356a4a5c6e437079644a626c544862687775684d5853507a38795461634f613742685450397548522b6a4149307962683062675166587079694f4d32344f4b396d4c4c674c544848576e306869705558465c6e6a2b4c6962435762493764495873384e6858464f794b52494c62496746365a544344356e4a6f3046384677596262626e56757563526b686a7255376d3436314f78764e776a5063574b6470725c6e69305763377a5970316d66723632484f63683877684e67396a776a484e5967587663446a4a5172774f70493858305246386e3432766a4330636b7a576c7a6e533874377934575749445731515c6e79324f7231674d542b6b676336382f43696145387a4539573438794a4a707964317850744f447658536847615a5a775431334d744f44334471702b69376339506365326c4b4231305268664f5c6e634a6f374e6336786469795261794a4f542f44494f356c4b484a58464f4465544c354d2f4e527250615447595563716c512b6f6f6a6a6762704c474270737672654a7662346d6954505863655c6e78304e6a7a59345359546e5335474155494d727a625972776e766c524f69416c5a503950513531662f534c51646a5743624a387a684e49464d61357245652b2b466b643931314f417463674f5c6e33597a6144453644655566517a6c4735522b6b70372b6c6a62614759366d47444736334779526b397a737750342f52634a3036542f4f6e6a545467316f2b506153444661634761326a5149495c6e74474a2b536f6d3569556f4b30575953526b646f6350613469724e2f4b6b364f6b767959474956546a474b4d473639505478796c51426e38766a6a364b6a6778527544634353584f7a7854535c6e4958544a564372647757694d4a78704946674b6a7a5134727541314b684d5856543054433364365334674a326d51324d6a59685066733344584e2f7338626352417178614569345157324b735c6e32316f6b6b6e79437834744943337754525a466255426a2b4a707034576c536e376b5a48485539664a377077636d345970306a38354f774130553868326a422f544965547835737051444d665c6e383370615456645559473638414d776a4a6a70444b45415a5856435055394d314f446c567a7132716e454a5273426d4b4d384a6a377969486e7a4869796a706d46474a2b4a4148484f414c505c6e3875427a626c624e70716b7843694d776d53494c4d4473555a526a55326e484c6462673830757a77665646355870734a4a317a3969764234567768684565613253597277664366657a336f565c6e677578655841693057516e52444b4e64324173383174494e4c79434f5061456b6267657941376c47626b4b3836374d6f793341693055596347327641374c46757a4233767766794a667377645c6e613850735241324f6a3556695a6a69625454474630596a447362356f726a775036486e53473836684f46724d6a6d626a2b4244502f6f4d382b764a" +
            "514d7a65655238666f4b46594a536644785c6e534a494a51684165686f626a32576534625134666c5a76702b586e476a4134344e58375546426b526c7a54786e4b55426a533233576f653263314249777933323070444f337577726e34736c5c6e424f2b547774793357455a366235654962623648317944492f75576c414c7358455769394570484f4c79434d733047417a624f49634671447373515055426a784e677243586d504466414c5a5c6e4d5874785972494245344d566d42717078596e7054687966704344446852782f77376b64526d43794a777054766446454c4965696545783068584647534d48637449617879616367305a675a5c6e694b4d72346f3059694d474a6b55796350465a5063646850426d4e78596a67527378546842455761346c4634626978666a73325a343355345137664938546d6834716b7853343647634d4e345c6e7538394366344d4e2b354e393349446d6945525944477150665058443059496b58796e59655a4e35684d394f4b644a6e78774f2b4e75762b366e586f4f59533562445234486c774a37304d725c6e454f4f2b486c4675363643776678343534652b684c48346e592f4147516d7966516d4c41466c5a6668664542436a4461674f5054335878636a2b6e684d6b774e356d4b694a34354352484b4e5c6e70684378387657594f4f5a4f3147466d74495369384354594a34534a6b7946634d6b4f5268436a4868396a684a3675344a737675454d4a4d385367384e38485a59555a46702b545342555a335c6e6e4a71756b4b4e7a356f53474d5371576f7a4c63374c72595632384c45742f56723747542b6876734c46764b72623471514b6a7257354b6e7a55597a462b764e6b7166396a75753962645a505c6e6546757a2b7261726c3049634f526735623043632b797649554c794c37416a61502f526435496476526c6e634e6b513450494d77312f555936792f48784a414b787959364d44505a7862554e5c6e6b384f5664455131706f62355065344b34393278504264456b48775578536e4873644571756942576473646b6234777368424778484a394e676f6934444354682b4767654252483336414c4f5c6e454c4f6a75624967782b6d4d342b77424a3079596e79686b704e534d442f764273527244554a4d487432777251372f472f68454b4952486d6b2b324f2f2f6752755a2f6461394c526949506d5c6e4b52465755716a3775316c68376d2f423539444b685344754348452b62356c36775976496964694f7774686453504e39426558784f2b5174306e332f452b6a764b4d453079552b4e36656d435c6e4a6b4a4452355177466d55556f7471496f584b4d39365a68556b7948497a5538486964536b45674b45304e58524d75596c463053593851564d63517143354b4559344f7046434c654b4978775c6e796b43384556656a45796337357551784e644667474f3549515a2f4f3530785037653562753555377056364e73356d49776a39384a66712f4a7755377657455a3472524a556a68764f68526f5c6e7677462b317173586651382b6735416a61396744566e4e483448546f735136356b64755253674879517439456c6d494c3350592f6a5a373243687962374d62346b43426554546655597151375c6e48554f6343555a35444237764c35523778425578786a676f6a585345595a5254346967487054477534335347634d6334347a486562595151516b526d76457349456d2f714a554b514f4b4d6f5c6e4a687937347059686e6a4f474d34325247633563484f454a644c676a7158352b4e456643353158536b443778363339544648426b67336d7730357569487a7a716565423567342f564b7668615c6e725454344833365735344e5663674f4d646c364e565038336b42377747744a39583059757a776b4b6a73397475674a5776526b6a765a5559375366426756714d397056676f465568593741745c6e6a47386b44694d396d624977772b313872492b514d644a7842" +
            "5a47794746636768426a6c7557476f5052515476616b5549756f6258544a424a78336a5155735751676a54473755773043682b5c6e34574954326c566e4b2f58554f3168303152372b352b52446e4e2b5567687a664d45734f733550536f3531763854713035705437766d6667643369567763394b754743313749496f6969424f5c6e695a6b6862394d4636354468767835654235354562576b594a6f62724d4e52546a70472b4b6770423946566a6f4330472f53314368484430385a4455337849756979457731436175426346775c6e43684c784e304830526a47473957486f622b4b51315a744a5a3344626c455835716b736d5443345a3563673933694f4f33764779514e503943527a56765a66614b672b6751326e396a7237615c6e536949734759477664304367777876534278742b5a485a77303332536a383236437063395434457557505135394177486f2b635236724247486f396a584635416574426253505066674d79415c6e4466443434474555704468676646694667613479696c41685937695841756a54304e764d51355057447a314e5552686f5430412f482f653368424a68464d59496f79676d51665469513952515c6e394843304875354d6b2b4d7972412b5652666c6e4c686c703535466166496a61453039526f755464686a4230314e716876657251516f6653396b46396a5455464f47772b30427a7939514c345c6e326234712b647175742f53313279443548336e5632655744466644592f2b79436a39567a384c4e366c674b3861484c42616954356245524730435a6b424b79487a3448486b52717846364d445c6e64656a724b4a564645426a7371634a41527937304b6e64304e4152686f444f4859696a513278534350713547684b4a50466950554a4962524b5a3331727568765463426f547835464361564c5c6e2f756151723771457a7865664c2b716a3544346958434b694d4e51712f75446949467172447033516c757938555665795332717032472f575757763939514a38372f6276634466596142486f5c6e75456b69567276756577347565353645372b485638446d347774514d5836414c566e4d386668455a495a755247636a446b3955546950625a6a43465776466466496f765131316d4b2f71354b5c6e6444596d6f4658707a6e76353647324a70784d4330644d59636856436a4634685172503478616b67376b5834794d386437696c6d6843497830424a73366956687073684547474e44702f51335c6e42387143476431683743566978756971643174734b74324c686f49646c666f6157366d337764314d6e626631582f2b7467492f4e42724e7772353153714d654f4f7a30507658445a6365666a5c6e384c4a61626643316568372b683163697a476e745652656b2b4c324f624d5662434c5a35476b476346775478486772516f792f6d726c434537745a43744466777a54536c554a6738644771435c6e30616b56767a306975486272516f7a514271424437553258424b436e4f596c4f4b63525164784836322b4c7041735a472f4236684c6459556d78415a41347a4951497452774d483261446b435c6e56313343746158793049493637333355352b2f3049535231336b374c6d7178742f317141635063333556583837757a77316965302b39353643473448566938474f3236453934476e6f5842345c6e43654c6a632b4f572b444b7977393668493536444e324f6962386f6c38574a30745257696f7a6d58494f6d574848533363645846514b2f326b556b61455369762b6e702f36427643304e32535c6e5367454c4f5538774a713130696e43494c7367596c35595952696d626f68526973444f4c6653534a346b54544e654738547237615234516f513478437438594c71727864426d32704e52714b5c6e397230353165457164616e734c4c3756583476636664657430674f2f7548505a6c394f42306976502f3272487a6a63663571447a334a4b76395272344d41722b31732b4a44" +
            "303452657552355c6e42504f306d42573246516c65362b443677522b68713074426433734a4f707279304b374c524764724762726153796c434e7538646856354c45625352304773554a423243446c3073756c71795c6e4b466f65335a4a4b6b534c516f57454d4e414630534a44736c47375a4c594879327450454861556a543935704272736f686e414a6d326f764939445848434c485345536c756472466f43317a5c6e674b3730774a644a496138394b4970703838454b69322f37467a506d7936367a584c374d5572715a317a6539393972444458626248346662423038752b6c712f414c45314b6878665271444e5c6e632f433357555542747373376774504f68364573435565337668527432697a4f42546e6f3071756762307848757a6165377369674933496f687445566e63335a4d766b4f58527864454952325c6e745a2f4a4459467977355368436149595156646a30394867687a62785157786a48506f5a6b34484f416a5a62756b6166515a644555346867396f35594e4e58344c6d6d4b39304664734766715c6e73642f66637764354c502f68586264653932334969324f69654f4a4e4e393577336239787666585258392f353349375866764d6e5a7a5a446a333072444634486864315a2f534d384b3968785c6e54485a6669367a5164796a5159796a4b384b49445374476b546b4e37637a6b3657717651584276454e2b544a315138746455466f565964536b435136497076584957697438306172796839745c6e3667434b3844666f367755435a55466b55545247555a70726e4e476d436b427657795a465561436e4a5a48524b61416778584a382b765535745032427866724350616a4b326c564244742f355c6e336e6476756e5835395a624c78522b452f43734278425045453238526d38494e79362f374d646337316a317a542f5368647834524f774a6e677058774f5041735434717649747a704a5236475c6e6e70632f4a50466c6730794c74716274693944556b454d424b7447717930616a4d67434e4e6436454434587751574f564f3572564d597849686c4555575267544b4554724e5768542b3576455c6e43434a70587a525675614378306f6b5243714d72464f69675930516645633231757a6c42627253696a326a4b6e425a562b627551452f6465454e2f2f44666638394874336d4a6c4a4e356d4b5c6e612f597671302f635474786c626d373245363733336e627a736f6333762f7a4174496943312f34565339343848305235764946496c33554974312b4652453647496659764943356f463971625c6e437447734c55534c4e686374445a6e5156767443572b554658625533644253676f64794e39342b69745347426f6e696853656b726f316d673167696a4b455952577572342f577033364370645c6e5a51466236713634784e2f6f454b4b393374684d4f796945694965324f7469674b72524369507661392f6e2b623776722b7a6666615371714b4b37353132616675463559686844322f7948785c6e48396376732f685072766339387575376250652b3958746a44413673514a4464476e6c4c464a386269706b67684765464d4b3933306470494239526e3051585a584e4f6771665169504b47705c6e3870624a7138766330614c4a51474e744b4958786c4a317842594c6746554645624852306934372f72716b75464b33313058524536466364496c59367037302b2b4b6f6f37577066513133425c6e5156546e48667038302f71486e755a372f38464e4e31352f6c784243754947772f435942727471662b42487863397269507930747a422f6839534f76726235503437447a53646b46596a414b5c6e645677726a38666945364e49782b635235726b5a4f6e556d6b593547697142544a614f2b33414d4e46563479616774736f4b34496f446a70304e59454734556874414c434a565669395a44765c6e36666a395a6a57487149596b52694e4d646b695430767571553452446d756967466c58" +
            "495655486136344d4d7a5571664257584f4870516366572f79746c74762b68586639342b76733753345c6e792b547162347a426c667a664b6e4a7645754265346a38747a4d306535667248752b2f367a72753733766a64782b3737566e416d574745516e7855494634527a4d6778336541344b352f566f5c6e714b507456526c454a6a544b574b684b584f5371317859356f4b374d6c31746c4d6f5535537154774f6835615a546a6434552f533374425542304a584730586e4845557a59394a594632364d5c6e547658664f55587078306a5148545742736741557739436b39466c536c396761616e49506f434a6a35324b553332766972366e7659522f376d626d5a325139342f6431764b38417431776a775c6e6379454138544256584d6e31365763662f556d797a66592f3867533459736e33454a75683038736b763062384f67324f753539416256556d476a566c304b714c304b4138436c5735482b704b5c6e766143756a4942476c51704e5459775274596e51636d375171644b495643494a6a65705547546f68696e4248686273634953316a6341573661682f6564364f6a764e47696a715a72504a5a555c6e5258614736757a644b4533662f3566346b4d334b39532f383669322b3131395a57707266782f576e49676266526f41725065426d5577542b58536849694c38372f514f37364e4e55636732765c6e4e327865392b4345367764506966504255764352462b5464514d484279476272373147637936705267415a314b64325141335631676f7a366d6b546158344736456a66434661705354366a4b5c6e76486e5048773256496444574a6c4755654561475970573558524d6454786e47754e416c764661584f744d355555753168585947626e556f5448726e722b472b6d335176726e357348392f665c6e347859573572386e2b5966346e6e2f4a78364b5258346e416a535942766e595857485a4e457853712f59646f674d52447842507342617535726e3767336a74633932312b424a37376e7a62345c6e487a5a4f68754a3343465a62666f757352426330314b616a72696f44645a574a5546564751313254416e56564c43506768397069787148597a51525877686d31346d2b506c516b5568434e735c6e71576955486c6452582b347069794b76464b59363132717070736a4c554a316e6a634c454c51734b7a3166304b2f37344d33484966386e4d7a477a6c736d57574b3639665a766b59482f2f615c6e464f473769652b626f76324e5456417966664e475538635557386550545439452f504734614951724b4d4a6172692b7557336c6672665857787a67425072345534724157437673314f506a325c6e723545635951314e5851617153794b6872474456612f4f67716b726d6c4f694c6d6b49583142533551466e6b4b6b4f4955463367694c714b5345596c454d7043523935335a6d54635a616a455c6e79683553572b5349716a7a62705a4c30665961797a4d4d6f79585a624376485932502f30597a384c344874356d3851334d714c725356345536416e696479494370674c2b304f546f6d30304f5c6e4e2f2f474d66696147467a64436f6e3754542f306a347a4238304b413739312b77376233582f2f394254396256742f2b4a554d59472b4475312b39486d50633275654c565a61792b4d6738315c6e5a57476f796e6369534b4c41685952645546586f5444466365632b65397a78525636364173706a33382b786c4347665546446a49347644664c70586e4f42764b737831516c48356b4b6452765c6e352b694b4a33346a2f726645626c723858525a6b7933585857627a4b78794b655435734b64615836507a595638725a2f5a66392f356f4a62546461353239514c52445038412f456b315259765c6e397478546a2f34387775334147766764576d47496448384e6837632f4358667256326a2f46436a5a4447764b6f6c43526134654b50436455356a7466685243694d7338525a566b3271436b4a5c6e51" +
            "7255516849346f547474727646666b69636f437a3658795846644457665952354366764e515335767a7278314750334a504231725568384e334f2b6b2b396a437839764a4634676e6947455c6e395839726975325635766476333762366639384c726b794564357045754e656b37422f34684365354e516f6e72474644374858662b79546e675a65576e4439344269364831714b32386968715c6e79685070676c6955357a6f546a68534379484f557852416f79624243655a3462785843543731635675434d766553394b7335325753724c734459564864334f55665163427a69394f502f33595c6e54314c34577262455067734c6937306b766c31593330526546474f46696678444a726465612f3162766b333276326b71765033762b6f4677777539596753644633753637353434392b39372b5c6e335a66427471766778696e52647564547143714a492f6b454765573562696a4c735564356a714d527555346f5472636944744d4e376f5172712b324f6b6979377065793472596263684865525c6e46663057416c3358547139383874356b766f614e6b626a3550684c66775774523964654a6461496858325037333567712f7a386d2f30306958496d4455506d337a4e376a516f79314b2b354a5c6e642b594d34486434315a495647324e7862716a634136704b45314357353458534c447555356a68514345666d32496f344c44756a6a50634b55772b532b445a445673786d5a455a7635767a2b5c6e797453615a2b2b5035383839514f77693854306b2f763431784638785666315a305a4f49333575632b5175543766385a6562502f376e38674d7a66463463724f634966704263514c2f59494e5c6e55627a7762322b2b61646e5437372f3636326c78556a7a3033694e4c32536b2b6a4541534b6f726a555a3466674f4a4d5731726255535a656d4762444c753643334f51506c6a4b69337a466b5c6e524c324e394d69336f6642635037467531514d522f486b7957524c66536f48663454742f303254316c30305666386255365238325666312b553148754e6858707536624d4c2f2f76567636665c6e3951524c6b356f336d31376754744f6b4b41354c386e627a78454d2f33472b7a39524659623333596b427a74694a714b5a4a515878614b735145463773394c703173684a326f2b635a4e756c5c6e31496a4e7843616b5262794e634a2b4e59362b762b323041743749332b4850576b2f67627936367a6549324e546c54364a564f31563571732f70697034672b6169502f63464d30666d4b702b5c6e71366c334c66753244652b2f386d56786a52747575534945332b69504b4d4c50784f533464654e44466676652b693169516734744367655546555a5468456a6b4a75314663756a6d706651345c6e4b3045657165476277466c39354c3033483361334d413558597235597777466d44582f6538795a37503232792b4b4f6d3365633370716c555750316e663066384e6c4e556c2f39504c6639745c6e335041505176434e4330663832357156447a327964634d446c30493874364f36504d6c515668694c2f4c516a53776e426279796c786473674e576f625976773344752f662f76535247355a625c6e697362314950503932504c6c317a314f427a787173765566544e33385156504476663861306a38786a656833586b50384a685078362f34337176354e51706962586c53382b453366765857355c6e63495446786d662b3363484464694d6a6b4c5a516d4f577a6c42793642576e78646b694b3244506b734f2f4a4137666666724f597a2b2b6d7a652b3736635a6c443569626d3931763674362f5c6e4e42483975536e54507a55522f7047703074383337656d336d614a346f366c4a572f7876567678626963457643385a673253392b3961415134775a587177317470666e6853497635414d6c525c6e68345956666e74332f2b534879385742354473386e763767396c74762f4247742f2b2b6d686e706c2f59454a64" +
            "35724966753861777265594b6e32446962536c7151442f54346e2f773566315c6e422b737463314d384a495858376a565a5351376a73597264372b33597666656d735a6c5a365937763358626a543337303356735a6c35744e685034654e3576776e5776494c6a66467a664c2f5c6e6830702f34396476666e6d48314e4e564c56555768306f6c32643433734f48646c525a3757504a3033474a75652b674e7933742f6471654669595346695a436c4b554c58586650347976662f5c6e723154332f774477527771745a59302b4b4141414141424a52553545726b4a6767675c75303033645c7530303364222c226d6f64696e666f223a7b2274797065223a22464d4c222c226d6f644c697374223a5b7b226d6f646964223a226d6370222c2276657273696f6e223a22392e3033227d2c7b226d6f646964223a22464d4c222c2276657273696f6e223a22372e322e3231372e31313437227d2c7b226d6f646964223a22466f726765222c2276657273696f6e223a2231302e31322e322e31313437227d2c7b226d6f646964223a2244796e6d6170222c2276657273696f6e223a22312e392e342e312d3838227d2c7b226d6f646964223a225465727261696e436f6e74726f6c222c2276657273696f6e223a22322e362e31227d5d7d7d"
            ));
        } else if (data.toString("hex").startsWith("0700") || data.toString("hex").startsWith("0100")){
            socket.write(hexToBuf("ac01010000a230819f300d06092a864886f70d010101050003818d0030818902818100d7ddcc65c9074f310fb2951f1235bc4ab560c5f164c5ed43d950a97ef899253d1f66694de9468961c31d0d2f0cfd8b91c3f8767357b8c532d4fff1303e1b851d276a4e54135c372b3b3d3d10f7cd74c6062508a94bd756b1ef7ec83f0fe0f50258129edfe1f88650d23a24a82150348486654dfc269486ec8ee06026a1e5cbf1020301000100044cf690f9"));
        }

    });
    socket.on("error", e => console.log(e));
}).listen(25570, "127.0.0.1");

// var client = net.connect({port: 25570, host: "37.59.31.213"}, () => { //'connect' listener
//     client.write(new Buffer([0x05, 0x01, 0x00]));
// });

// client.on("data", (chunk) =>{
//     console.log(chunk);
// });

// var auth = require("./auth.js");

// var network = require("./network.js");

// var net = require("net");

// var serializer = require("./serializer.js");

// var session = {};

/*
function initialConnection(callback)
{
    const client = net.connect({port: 25570, host: "37.59.31.213"}, () => { //'connect' listener
        console.log('connected to server!');

        const buffer = new Buffer([0x12, 0x00, 0x04, 0x0c, 0x33, 0x37,
                                   0x2e, 0x35, 0x39, 0x2e, 0x33, 0x31,
                                   0x2e, 0x32, 0x31, 0x33, 0x63, 0xe2, 0x01 ]);
        client.write(buffer);
        client.write(new Buffer([0x01, 0x00]));
        // client.write(new Buffer([0x07, 0x00, 0x05, 0x61, 0x6b, 0x32, 0x33, 0x39]));
    });

    var ref = 0;
    var logging = false;
    var received = 0;
    client.on('data', function(data) {
        if (ref)
            clearTimeout(ref);
        ref = setTimeout(function(){
            var v = received;
            ++received;
            if (v === 0)
                client.write(new Buffer([0x09, 0x01, 0x00, 0x00, 0x01, 0x52, 0x1a, 0xc2, 0x5d, 0x13]));
            if (v === 1) {
                client.end();
                callback();
            }
                // client.write(new Buffer([0x07, 0x00, 0x05, 0x61, 0x6b, 0x32, 0x33, 0x39]));
            logging = true;
        }, 1000);
        if (logging)
            console.log(data);
    });

    client.on("end", function() {
        console.log("Connection closed");
    });
}

Variable = {};

Variable.VarInt = function(number) {
    this.number = number;
}

// Variable.VarInt.fromBuffer = function()

Variable.VarInt.prototype = {
    toBuffer: function() {
        var bytes = [];
        var tmp = this.number;
        while (tmp) {
            var b = tmp % 128;
            if (tmp >= 128)
                b = b | 1 << 7;
            bytes.push(b);
            tmp = Math.floor(tmp / 128);
        }
        return new Buffer(bytes);
    }
}

console.log(new Variable.VarInt(10).toBuffer());
console.log(new Variable.VarInt(1).toBuffer());
console.log(new Variable.VarInt(300).toBuffer());
*/
/*
function login(callback)
{
    const client = net.connect({port: 25570, host: "37.59.31.213"}, () => { //'connect' listener
        console.log('connected to server!');
                     / packet length   packet id  proto ver  length = 12                                        /
        client.write(new Buffer([0x12,  0x00,      0x04,      0x0c,       0x33, 0x37,
                                   0x2e, 0x35, 0x39, 0x2e, 0x33, 0x31,
                                   /*                      port: 25570 next login /
                                   0x2e, 0x32, 0x31, 0x33, 0x63, 0xe2, 0x02 ]));
        setTimeout(function(){
            client.write(new Buffer([0x07, 0x00, 0x05, 0x61, 0x6b, 0x32, 0x33, 0x39]));
        }, 1000);
    });

    var ref = 0;
    var logging = true;
    var received = 0;
    client.on('data', function(data) {
        if (ref)
            clearTimeout(ref);
        ref = setTimeout(function(){
            var v = received;
            ++received;
            if (v === 0)
                client.write(new Buffer([0x85, 0x02, 0x01, 0x00, 0x80, 0x61, 0x49, 0xd7, 0x30, 0x19, 0x64, 0x66, 0x31, 0x98, 0xc4, 0x00, 0xda, 0xd0, 0x39, 0x02, 0xf6, 0x00, 0x75, 0xc0, 0xb0, 0x07, 0xc5, 0xf1, 0x58, 0x62, 0xe1, 0xda, 0x32, 0x82, 0xfc, 0x4a, 0x51, 0x8e, 0xc5, 0x0f, 0xb3, 0x4a, 0x77, 0xa9, 0x0c, 0xfb, 0x65, 0x56, 0xf1, 0x19, 0xb2, 0x15, 0xdd, 0x18, 0x24, 0xe6, 0xa2, 0x7c, 0x36, 0x80, 0x0f, 0x07, 0xe0, 0xe6, 0xc2, 0xdd, 0xaa, 0xa4, 0x4b, 0x2d, 0x8d, 0x9f, 0xe1, 0x24, 0xcd, 0xfa, 0x77, 0xed, 0x87, 0xdd, 0x16, 0x4c, 0xcc, 0xfb, 0x15, 0xc6, 0x65, 0x1c, 0xc6, 0xa9, 0x15, 0x82, 0x26, 0x45, 0x71, 0xfd, 0x4d, 0x09, 0x2e, 0x14, 0x53, 0x5b, 0xb6, 0x0c, 0x77, 0xd3, 0xb2, 0xc1, 0x75, 0xcc, 0x33, 0xf7, 0xcc, 0x61, 0x06, 0xc5, 0x38, 0xf6, 0x23, 0x25, 0x2b, 0x61, 0xee, 0xda, 0x4a, 0x30, 0x2f, 0x7b, 0xac, 0xb1, 0x77, 0xb5, 0x98, 0x00, 0x80, 0xa9, 0x74, 0xd4, 0x1c, 0x6f, 0xac, 0xad, 0x18, 0xb5, 0xa1, 0xdf, 0xb1, 0x4c, 0xcc, 0xdb, 0xd2, 0x00, 0x94, 0xe8, 0x59, 0x0d, 0x73, 0x38, 0xf2, 0xe8, 0xaa, 0x0e, 0xc3, 0xbc, 0xd9, 0x5f, 0x45, 0xca, 0x6c, 0xe7, 0xd6, 0xa4, 0xb3, 0xa0, 0x26, 0x27, 0x91, 0xee, 0x40, 0x51, 0x72, 0x8e, 0x2c, 0x50, 0x3a, 0xf0, 0xb9, 0x25, 0x46, 0x7e, 0x59, 0x46, 0x37, 0x49, 0xff, 0x4e, 0x07, 0x6c, 0x72, 0x9a, 0xab, 0x26, 0x2d, 0x56, 0xf2, 0x10, 0x28, 0xc7, 0xc1, 0x2e, 0x62, 0x84, 0x93, 0x3b, 0x71, 0x62, 0x08, 0x50, 0x03, 0x99, 0x33, 0x22, 0x43, 0xc7, 0x35, 0x5a, 0xf6, 0x9d, 0x74, 0xcb, 0xf1, 0x7c, 0x11, 0x08, 0xe6, 0xd8, 0x8d, 0xd6, 0x84, 0xc0, 0x67, 0xe4, 0x96, 0xb5, 0x15, 0x3f, 0x9c, 0xff, 0x73, 0x3e, 0x71, 0x79, 0xfe, 0x08, 0xed, 0xc3, 0xa7, 0xff, 0x65, 0x9e, 0x02, 0x9a, 0x79]));
            else
                callback();
            // if (v === 1) {
                // client.end();
                // callback();
            // }
                // client.write(new Buffer([0x07, 0x00, 0x05, 0x61, 0x6b, 0x32, 0x33, 0x39]));
            logging = true;
        }, 1000);
        if (logging)
            console.log(data, data + "");
    });

    client.on("end", function() {
        console.log("Connection closed");
    });

}
*/
